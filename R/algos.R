#---------#---------#---------#---------#---------#---------#---------#---------
load('~/Learning/marketModeling/data/myHistoric.RData')
head(df)
tail(df)

get.daily.change <- function(x) {
  (x[2:length(x)] - x[1:(length(x) - 1)]) / x[1:(length(x) - 1)]
}


prev.last <- dim(df)[1]


sp.actual <- c(df$SPActual,
  4797,4794,4701,4696,4677,4670,4713,4726,4659,4663,4577,4533,4483,4398,4410,
  4356,4350,4327,4432,4516,4547,4589,4477,4501,4484,4522,4587,4504,4419,4402,
  4471,4475,4380,4349,4305,4226,4289,4385,4374,4306,4387,4363,4329,4201,4171,
  4278,4260,4204,4173,4262,4358,4412,4463,4461,4512,4456,4520,4543,4576,4632,
  4602,4530,4546,4583,4525,4481,4500,4488,4413,4397,4447,4393,4392,4462,4459,
  4394,4272,4296,4175,4184,4288,4132,4155,4175,4300,4147,4123,3991,4001,3935,
  3930,4024,4008,4089,3924,3901,3901,3974,3941,3979,4058,4158,4132,4101,4177,
  4109,4121,4161,4018,3901,3750,3735,3790,3667,3675,3765,3760,3796,3912,3785,
  3825,3831,3845,3903,3899,3854,3819,3802,3790,3863,3831,3937,3960,3999,3962,
  3921,4024,4072,4130,4119,4091,4155,4152,4145,4140,4122,4210,4207,4280,4297,
  4305,4274,4284,4228,4138,4129,4141,4199,4058,4031,3986,3955,3967,3924,3908,
  3980,4006,4067,4110,3933,3946,3901,3873,3900,3856,3790,3758,3693,3655,3647,
  3719,3640,3586,3678,3791,3783,3745,3640,3612,3589,3577,3670,3583,3678,3720,
  3695,3666,3753,3797,3859,3831,3807,3901,3872,3856,3760,3720,3771,3807,3828,
  3749,3956,3993,3957,3992,3959,3947,3965,3950,4004,4027,4026,3964,3958,4080,
  4077,4072,3999,3941,3934,3964,3934,3991,4020,3995,3896,3852,3818,3822,3878,
  3822,3845)

fid.in <- c(df$FidIn,
   57134, 57134, 57134, 57134, 57134, 57134, 57134, 57134, 57134, 57134, 61104,
   61104, 62434, 62434, 62434, 62434, 62434,160743,160743,160743,161785,161785,
  161785,161785,161785,161785,161785,161785,161785,161785,161785,161785,161785,
  161785,161785,161785,161785,161785,161785,161785,161785,161785,161785,161785,
  161785,161785,161785,161785,161785,161785,161785,161785,161785,161785,161785,
  161785,161785,161785,161785,161785,161785,161785,161785,161785,161785,161785,
  161785,161785,161785,161785,161785,161785,161785,161785,161785,161785,161785,
  161785,161785,161785,161785,161785,161785,161785,161785,161785,161785,161785,
  161785,161785,161785,161785,161785,161785,161785,161785,161785,161785,161785,
  161785,161785,161785,161785,161785,161785,161785,161785,161785,161785,161785,
  161785,161785,161785,161785,161785,161785,161785,161785,161785,161785,161785,
  161785,161785,161785,161785,161785,161785,161785,161785,161785,161785,161785,
  161785,161785,161785,161785,161785,161785,161785,161785,161785,161785,161785,
  161785,161785,161785,161785,161785,161785,161785,161785,161785,161785,161785,
  161785,161785,161785,161785,161785,161785,161785,161785,161785,161785,161785,
  161785,161785,161785,161785,161785,161785,161785,161785,161785,161785,161785,
  161785,161785,161785,161785,161785,161785,161785,161785,161785,161785,161785,
  161785,161785,161785,161785,161785,161785,161785,161785,161785,161785,161785,
  161785,161785,161785,161785,161785,161785,161785,161785,161785,161785,161785,
  161785,161785,161785,161785,161785,161785,161785,161785,161785,161785,161785,
  161785,161785,161785,161785,161785,161785,161785,161785,161785,161785,161785,
  161785,161785,161785,161785,161785,161785,161785,161785,161785,161785,161785) #
fid.val <- c(df$FidVal,
   94096, 90621, 86085, 86306, 84787, 85416, 87205, 87106, 83943, 83649, 84545,
   84094, 85649, 82388, 83399, 81424, 80533,218550,222221,229970,232595,228121,
  221810,225872,225565,227194,232232,231501,226454,226222,230340,230174,224468,
  220354,218267,212341,223870,228841,232960,230158,230738,225290,220206,215209,
  214494,218804,217080,213226,207439,213845,227138,236682,250020,243490,251352,
  245734,249364,242369,247895,257702,251481,245407,249188,258258,248363,238575,
  237355,231025,228022,224991,231757,223658,220440,226673,222025,216685,213970,
  217134,211660,210306,213446,208981,212931,212020,216771,207224,202355,193896,
  192151,187333,191359,199792,195092,198413,193282,196613,195702,195714,189526,
  192622,196485,201013,199789,197811,204343,200244,200814,202967,199335,193556,
  186835,186732,190591,184515,188039,190785,192242,199330,205791,189578,193294,
  202019,200737,207345,206357,198963,196384,196365,193107,197377,196762,203797,
  211280,215248,207592,197929,207116,210254,211394,212250,215404,220913,221782,
  223126,223592,217642,228217,226121,229954,230687,229029,223825,222780,216383,
  211579,210857,213022,217666,210247,207551,206557,205429,198434,197169,195701,
  200533,203662,209931,212532,202224,203649,202214,197177,197952,194256,190725,
  184174,181106,179479,181235,186746,182079,180641,184953,194503,194130,194112,
  185139,181456,178108,178306,178930,172184,179925,183072,177375,178474,180556,
  180254,187618,184876,185222,187994,186433,187381,179118,177412,175157,175492,
  175944,170747,185852,193458,189261,195701,190261,186826,186239,183368,183637,
  186637,186110,183575,182196,190405,193274,192669,187783,184263,183966,185743,
  184878,186022,187558,186040,182146,181398,176249,175793,178184,174395,174475) #

f1k.in <- c(df$f1kIn,
   98297, 98297, 98297, 98297, 98297, 98297, 98297, 98297, 98297, 98297, 98297,
   98297, 98297, 98297, 98297, 98297, 98297,0.6935,0.6935,0.6935,0.6935,0.6935,
  0.6935,0.6935,0.6935,0.6935,0.6935,0.6935,0.6935,0.6935,0.6935,0.6935,0.6935,
     620,   620,   620,   620,   620,   620,   620,   620,   620,  1306,  1306,
    1306,  1306,  1306,  1306,  1306,  1306,  1306,  2023,  2023,  2023,  2023,
    2023,  2023,  2023,  2023,  2023,  2023,  2023,  2023,  2023,  2023,  2023,
    2690,  2690,  2690,  2690,  2690,  2690,  2690,  2690,  2690,  3375,  3375,
    3375,  3375,  3375,  3375,  3375,  3375,  3375,  3375,  4129,  4129,  4129,
    4129,  4129,  4129,  4129,  4129,  4129,  4129,  4936,  4936,  4936,  4936,
    4936,  4936,  4936,  4936,  4936,  4936,  5729,  5729,  5729,  5729,  5729,
    5729,  5729,  5729,  5729,  5729,  5729,  5729,  5729,  6455,  6455,  6455,
    6455,  6455,  6455,  7268,  7268,  7268,  7268,  7268,  7268,  7268,  7268,
    7268,  9069,  9069,  9069,  9069,  9069,  9069,  9069,  9069,  9069,  9837,
    9837,  9837,  9837,  9837,  9837,  9837,  9837,  9837,  9837, 10636, 10636,
   10636, 10636, 10636, 10636, 10636, 10636, 10636, 10636, 11509, 11509, 11509,
   11509, 11509, 11509, 11509, 11509, 11509, 11509, 11509, 11509, 11509, 11509,
   12489, 12489, 12489, 12489, 12489, 12489, 12489, 12489, 12489, 12489, 13411,
   13411, 13411, 13411, 13411, 13411, 13411, 13411, 13411, 13411, 14349, 14349,
   14349, 14349, 14349, 14349, 14349, 14349, 14349, 14349, 15263, 15263, 15263,
   15263, 15263, 15263, 15263, 15263, 15263, 15263, 16143, 16143, 16143, 16143,
   16143, 16143, 16143, 16143, 16143, 16143, 16143, 16143, 16143, 16143, 17065,
   17065, 17065, 17065, 17065, 17065, 17065, 17065, 17065, 17065, 18031, 18031) # 961.47
f1k.val <- c(df$f1kVal,
  157563,158404,157348,153323,153323,151838,151838,153394,153734,150997,151082,
  147813,146496,145095,141741,141741,141741,     1,     1,     1,     1,     1,
       1,     1,     1,     1,     1,     1,     1,     1,     1,     1,     1,
     863,   855,   847,   824,   854,   867,   867,   852,   869,  1818,  1787,
    1712,  1707,  1772,  1764,  1731,  1702,  1752,  2769,  2808,  2865,  2856,
    2895,  2900,  2911,  2908,  2940,  2988,  2954,  2911,  2921,  2967,  2914,
    3818,  3833,  3791,  3711,  3696,  3767,  3706,  3699,  3774,  4717,  4597,
    4455,  4511,  4342,  4349,  4474,  4276,  4319,  4301,  5377,  5117,  5030,
    4790,  4837,  4728,  4712,  4887,  4820,  4922,  5657,  5652,  5641,  5744,
    5631,  5714,  5850,  6042,  6017,  5985,  7121,  6970,  6999,  7022,  6839,
    6598,  6299,  6301,  6445,  6191,  6260,  6425,  6427,  7504,  7485,  7394,
    7480,  7589,  7630,  8724,  8714,  8581,  8409,  8393,  8396,  8540,  8462,
    8721,  9794,  9931,  9739,  9558,  9945, 10140, 10332, 10293, 10290, 11347,
   11354, 11348, 11318, 11259, 11650, 11567, 11795, 11869, 11835, 12658, 12656,
   12370, 12083, 12059, 12112, 12317, 11858, 11726, 11712, 12556, 12420, 12368,
   12344, 12543, 12612, 12796, 12885, 12398, 12426, 12275, 12102, 12095, 11902,
   12711, 12548, 12325, 12321, 12411, 12707, 12492, 12372, 12699, 13017, 13991,
   14079, 13597, 13468, 13333, 13346, 13584, 13584, 13584, 13749, 14557, 14540,
   14789, 14890, 15202, 15031, 14960, 15159, 15109, 15094, 15994, 15831, 15821,
   15832, 15913, 15446, 16457, 16753, 16466, 16677, 17446, 17327, 17397, 17200,
   17242, 17295, 17295, 17047, 16909, 17448, 17553, 17542, 17178, 16834, 17755,
   17940, 17712, 17918, 18032, 17938, 17470, 17322, 16981, 16977, 18163, 17838) #

self.mng.in <- c(rep(0.8668, 900),
           4460,  4460,  4460,  4460,  4460,  4460,  4460,  4460,  4460,  4460,
    4460,  4460,  4460,  4460,  4460,  4460,  4460,  4460,  4460,  4460,  4460,
    4460,  4460,  4460,  4460,  4460,  4460,  4460,  4460,  4460,  4460,  4460,
    4460,  4460,  4460,  4460,  4460,  4460,  4460,  4460,  4460,  4460,  4460,
    4460,  4460,  4460,  4460,  4460,  4460,  4460,  4460,  4460,  4460,  4460,
    4460,  4460,  4460,  4460,  6961,  9350,  9350,  9350,  9350,  9350,  9350,
    9350,  9350,  9350,  9350,  9350,  9350,  9350,  9350,  9350,  9350,  9350,
    9350,  9350,  9350,  9350,  9350,  9350,  9350,  9350,  9350,  9350,  9350,
    9350,  9350,  9350,  9350,  9350,  9350,  9350,  9350,  9350,  9350,  9350)  ##
self.mng.val <- c(rep(1, 900),
           5146,  5196,  5358,  5354,  5423,  5460,  5436,  5330,  5325,  5168,
    5035,  5011,  5034,  5112,  4920,  4865,  4911,  4866,  4757,  4779,  4783,
    4820,  4834,  4874,  4876,  4754,  4742,  4703,  4620,  4568,  4438,  4413,
    4365,  4277,  4321,  4405,  4527,  4481,  4489,  4620,  4667,  4685,  4793,
    4675,  4662,  4616,  4648,  4725,  4615,  4738,  4785,  4698,  4720,  4766,
    4750,  4860,  4891,  4879,  7652, 10280, 10320, 10197, 10044, 10019,  9997,
   10045,  9698, 10311, 10571, 10336, 10494, 10351, 10273, 10289, 10135, 10094,
   10070, 10093,  9945,  9819, 10106, 10197, 10207,  9979,  9782,  9740,  9848,
    9745,  9797,  9844,  9789,  9546,  9540,  9296,  9278,  9386,  9250,  9235)

et.in <- c(df$OHIn,
    49269, 49269, 49269, 49269, 49269, 49269, 49269, 49269, 49269, 49269, 49269,
    49269, 49269, 49269, 49269, 49269, 49269, 49269, 49269, 49864, 49864, 49864,
    49864, 49864, 49864, 49864, 49864, 49864, 49864, 49864, 49864, 50799, 50799,
    51650, 51650, 51650, 52046, 52789, 53816, 53816, 55281, 55281, 55281, 55281,
    55621, 55621, 55621, 55621, 57649, 57649, 58646, 58978, 58978, 58978, 58978,
    58978, 58978, 58978, 58978, 58978, 58978, 58978, 59760, 59760, 59760, 59760,
    59760, 59760, 59760, 59760, 59760, 59760, 60579, 60579, 60579, 60579, 60643,
    60643, 60643, 61614, 61614, 61614, 62294, 62294, 62294, 62294, 62294, 62945,
    63568, 63568, 63568, 63568, 64053, 64053, 64053, 64053, 64053, 64539, 64539,
    65847, 65847, 65847, 66684, 66189, 66189, 66189, 66189, 66189, 66189, 66189,
    66405, 66405, 66405, 66965, 66965, 66965, 66965, 66965, 66965, 66965, 67666,
    67666, 67666, 67666, 67666, 67666, 67666, 67666, 67666, 67666, 68601, 68601,
    68601, 68601, 68601, 68601, 68601, 68601, 68601, 69599, 69599, 69599, 69599,
    69599, 69599, 69599, 69599, 69599, 69599, 70266, 70266, 70266, 70266, 70266,
    70266, 70266, 70266, 70266, 70266, 70266, 70266, 70266, 72396, 72396, 72396,
    72396, 72396, 72396, 72396, 72396, 72396, 72396, 72626, 72862, 72862, 72862,
    72862, 72862, 72862, 72862, 72862, 73280, 73280, 73365, 74177, 74177, 74177,
    74177, 74177, 74177, 74177, 74405, 74405, 74405, 74405, 74405, 74405, 74405,
    74405, 74405, 74405, 74405, 74867, 74867, 74867, 74867, 74867, 74867, 74867,
    74867, 74867, 74867, 75544, 75544, 75544, 75544, 75544, 75544, 75544, 75544,
    75544, 75544, 75544, 75544, 76048, 76048, 76048, 76048, 76048, 76048, 76048,
    76048, 76048, 76048, 76644, 76644, 76644, 76644, 76644, 76644, 76644, 76644) #
et.val <-c(df$OHVal,    
   102557,100422, 97844, 98121, 97375, 97932, 98939, 99051, 97002, 96791, 95665,
    95391, 95163, 93596, 94389, 93136, 92819, 92495, 94639, 99447,100868, 98399,
    94494, 97379, 97364, 98090,100648,100016, 98296, 97198, 99552,100015, 96612,
    95617, 94996, 92698, 98555,101932,105235,104528,107470,105753,103912,101474,
   101801,103713,103204,102112,103435,107191,117790,121618,127554,123673,127957,
   126322,127162,124866,126801,131445,130528,127861,130695,135516,131259,127588,
   126916,124159,122811,121324,125142,121775,119628,123063,121167,118242,116101,
   117227,114478,116299,117700,115609,117580,116664,118435,114622,111952,108212,
   109388,106990,108934,114344,112948,114852,111417,113169,113265,113867,110468,
   114669,116925,119933,121272,119546,123545,121431,121564,123040,120119,117126,
   113572,113532,115921,112819,115593,117895,118605,123809,128476,117243,121093,
   127053,126301,130253,129600,125205,122883,122877,120273,123095,124640,129016,
   134234,136957,131665,124637,131355,133641,134583,137388,139366,143273,144545,
   145537,145944,141846,149554,147699,150552,152346,151156,147411,146525,141342,
   137877,137117,138688,142338,137044,135250,134554,133730,128698,128120,127054,
   130544,132639,136705,138637,131067,132050,130672,127973,128554,126151,124052,
   120023,118086,116832,118181,121663,119361,118782,121707,128930,128693,128486,
   122546,120777,118519,118618,119626,114679,119719,121753,118822,119820,121544,
   121523,126207,124447,124330,126651,125760,125860,120424,119244,117957,118285,
   118793,115516,126770,133280,130734,135486,131132,128339,127680,125640,126246,
   128806,128005,126336,125459,132410,135024,134237,130583,127155,128298,130617,
   129369,131613,133449,134083,129478,127739,125579,125726,127950,124739,124182) #


normalize.to.index <- function(x, index) {
	x / x[index]
}


sp <- normalize.to.index(sp.actual, prev.last)
spd <- get.daily.change(sp)
fid <- fid.val / fid.in
fid <- normalize.to.index(fid, prev.last)
fidd <- get.daily.change(fid)
f1k <- f1k.val / f1k.in
f1k <- normalize.to.index(f1k, prev.last)
self.mng <- self.mng.val / self.mng.in
self.mng <- normalize.to.index(self.mng, prev.last)
self.mng.d <- get.daily.change(self.mng)
et <- et.val / et.in
et <- normalize.to.index(et, prev.last)
etd <- get.daily.change(et)
tot.in <- fid.in + f1k.in + et.in
tot.val <- fid.val + f1k.val + et.val
tot <- tot.val / tot.in
tot <- normalize.to.index(tot, prev.last)
mine.in <- fid.in + et.in + self.mng.in
mine.val <- fid.val + et.val + self.mng.val
mine <- mine.val / mine.in
mine <- normalize.to.index(mine, prev.last)


# Calculate Sharpe Ratios
get.sharpe.ratio <- function(returns, window=length(returns), rnd=3, ignore0=F) {
  if (length(returns) > window) {
    returns <- returns[(length(returns) - window):length(returns)]	  	
  }	
  returns <- returns[!is.na(returns)]
  if (ignore0) {
  	retruns <- returns[returns != 0]
  }
  round((sqrt(252) * mean(returns)) / sd(returns), rnd)
}


get.daily.returns <- function(x) { 
  n <- length(x)
  x[2:n] / x[1:(n - 1)] - 1 
}

get.sharpe.from.daily.values <- function(x, rnd=3, ignore0=F) {
  get.sharpe.ratio(get.daily.returns(x), rnd=rnd, ignore0=ignore0)
}



m <- length(sp)
n <- length(sp) - prev.last
prev <- m - n
this.year <- (prev):m
days <- -prev:(n - 1)
new.days <- 0:(n - 1)
year.start <- length(tot) - length(new.days)

sp.sh       <- get.sharpe.from.daily.values(sp[this.year])
self.mng.sh <- get.sharpe.from.daily.values(self.mng[this.year], ignore0=T)
tot.sh      <- get.sharpe.from.daily.values(tot[this.year])
mine.sh     <- get.sharpe.from.daily.values(mine[this.year])
f1k.sh      <- get.sharpe.from.daily.values(f1k[this.year]) 
fid.sh      <- get.sharpe.from.daily.values(fid[this.year]) 
et.sh       <- get.sharpe.from.daily.values(et[this.year]) 


# PLOT 1: This year's returns -----------------------------------------------------
plot(
  days, 
  sp / sp[year.start + 1], 
  type='l', 
  col='orange',
  lwd=3, 
  xlim=range(days[days >= 0]), 
  ylim=c(0.6, max(c(sp, tot, 1 + tot - sp, mine))),
  log='y')
abline(h=seq(0, 8, 0.1), lty=2, col=rgb(0, 0, 0, 0.2))
abline(h=seq(0, 8, 0.5), lty=4, col=rgb(0, 0, 0, 0.8))
abline(v=0, lwd=2)
lines(days, tot / tot[year.start + 1], lwd=3)
lines(days, mine / mine[year.start + 1], col='cadetblue', lwd=3)
lines(days, fid / fid[year.start + 1], col='darkgreen', lwd=3)
lines(days, et / et[year.start + 1], col='purple', lwd=3)
lines(days, self.mng, col='sienna', lwd=3)
lines(days, f1k / f1k[year.start + 1], lwd=3, col='maroon')
lines(days, (1 + tot - sp) / (1 + tot - sp)[year.start + 1], col=2)
legend(
  'topleft',
  lty=1,
  lwd=c(3, 3, 3, 3, 3, 3, 3, 1),
  col=c(
    'orange', 'darkgreen', 'purple', 'sienna', 'maroon', 'cadetblue', 'black', 
    'red'),
  legend=c(
    paste(sp.sh, 'S&P'),
    paste(fid.sh, 'Fid'),
    paste(et.sh, 'ETrade'),
    paste(self.mng.sh, 'Self-Managed'),
    paste(f1k.sh, '401(k) All'),
    paste(mine.sh, 'Mine'),
    paste(tot.sh, 'Total'),
    paste('Diff(SP)')),
  bg=rgb(1, 1, 1, alpha=0.8))
#---------------------------------------------------------------------------------


exp.mod <- function(funds, x) {
  savings.exp.mod <- lm(log(funds) ~ x)
  log.y <- coef(savings.exp.mod)[1] + x*coef(savings.exp.mod)[2]
  exp(log.y)  
}


start <- tot.val[prev.last]
now <- tot.val[length(tot.val)]
low <- min(tot.val[(prev.last):(length(tot.val))])
high <- max(tot.val[(prev.last):(length(tot.val))])


# PLOT 2: Total funds over time --------------------------------------------------
quartz()
x <- 1:length(tot.val)
plot(
  x, 
  tot.val, 
  type='l', 
  ylim=c(0, max(tot.val)), 
  main='1 = 01 Jan 2018')#, log='y')
lines(x, exp.mod(tot.val, x), col=rgb(0, 0, 0, 1))
abline(h=start, col='grey')
abline(h=now, col='grey')
abline(h=low, col=2)
abline(h=high, col=3)
old.f1k.val <- f1k.val
old.f1k.val[790:length(f1k.val)] <- 0
lines(fid.val + old.f1k.val, col=4)
lines(x, exp.mod(fid.val + old.f1k.val, x), col=rgb(0, 0, 1, 1))
lines(f1k.val[790:length(f1k.val)], col=5)
lines(
  x[790:length(f1k.val) - 789], 
  exp.mod(f1k.val[790:length(f1k.val)], x[790:length(f1k.val)]), 
  col=rgb(0, 1, 1, 1))
lines(et.val, col=6)
lines(x, exp.mod(et.val, x), col=rgb(1, 0, 1, 1))
smv <- self.mng.val[self.mng.val > 1]
x <- 1:length(smv)
lines(smv, col='sienna')
lines(x, exp.mod(smv, x), col='sienna')
legend(
  'topleft',
  lty=1,
  col=c('black', 'blue', 'magenta', 'cyan', 'sienna'),
  legend=c(
    paste('Total: ', tot.val[length(tot.val)]),
    'Fidelity', 
    'ETrade', 
    '401(k)', 
    'Self-Managed'),
  bg='white')
#---------------------------------------------------------------------------------


x <- 1:length(tot.val)
savings.exp.mod <- lm(log(tot.val) ~ x)
x <- prev.last + seq(250, 3750, by=250)[1:12]
log.y <- coef(savings.exp.mod)[1] + x*coef(savings.exp.mod)[2]
y <- round(exp(log.y))
for (p in y) { cat(p, '\n') }

(fid.amt <- fid.val[length(fid.val)])                # [80533, 258258]
(et.amt <- et.val[length(et.val)])                   # [92495, 135486]
(f1k.total <- f1k.val[length(f1k.val)])              # [    0,  17553] 
(self.mng.amt <- self.mng.val[length(self.mng.val)]) # [ 4321,  10571]



#--------------------------------------------------------
# To Save New `df` at the end of each year:
#df.test <- data.frame(
#  SPActual=SPActual, FidIn=FidIn, FidVal=FidVal, f1kIn=f1kIn, f1kVal=f1kVal, 
#  OHIn=OHIn, OHVal=OHVal)
#matplot(df.test, type='l', lty=1, col=1:7)
#legend('topleft', lty=1, col=1:7, legend=names(df.test))
# Backed up previous?
#save(df.test, file='~/Learning/marketModeling/data/myHistoricTest.RData')
#rm(list=ls())
#load('~/Learning/marketModeling/data/myHistoricTest.RData')
#ls()
#matplot(df.test, type='l', lty=1, col=1:7)
#legend('topleft', lty=1, col=1:7, legend=names(df.test))
# OK?
#df <- df.test
#save(df, file='~/Learning/marketModeling/data/myHistoric.RData')
# Delete test and backups






